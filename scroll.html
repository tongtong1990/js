<html>
	<head>
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css">
		<script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
		<script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
		<script src="/socket.io/socket.io.js"></script>
	</head>
	<body>
		<script>
			var socket = io.connect('http://localhost:9999');
			var self_id = null, left_id = null, right_id = null;
			var left_cnt = 0, right_cnt = 0;
			function go_to_right_screen(tself_id, tright_id, snake_id){
				socket.emit('break_wall',{self_id:tself_id, target_id:tright_id, snake_id:snake_id});
			}
			function go_to_left_screen(tself_id, tleft_id, snake_id){
				socket.emit('break_wall',{self_id:tself_id, target_id:tleft_id, snake_id:snake_id});
			}
			$(function(){
				socket.on('header_change',function(data){
					var changed_snake_id = data.head_device;

					//to be added : change the header

				});
				socket.on('new_snake', function(data){
					var new_snake_id = data.new_snake_id;

					//to be added : add a new snake in this screen
					//to be added : set interval

				});
				$(document).on('swiperight', function(e){
					socket.emit('conn_left',{me:self_id});
					socket.on('conn_left_confirm', function(data){
						self_id = data.self_id;
						right_id = data.right_id;
						alert('Left screen confirm');
					});
				});
				$(document).on('swipeleft', function(e){
					socket.emit('conn_right',{me:self_id});
					socket.on('conn_right_confirm',function(data){
						self_id = data.self_id;
						left_id = data.left_id;
						alert('Right screen confirm');
					});
				})
			});
		</script>
	</body>
</html>